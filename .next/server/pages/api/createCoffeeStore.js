"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/createCoffeeStore";
exports.ids = ["pages/api/createCoffeeStore"];
exports.modules = {

/***/ "airtable":
/*!***************************!*\
  !*** external "airtable" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("airtable");

/***/ }),

/***/ "(api)/./pages/api/createCoffeeStore.js":
/*!****************************************!*\
  !*** ./pages/api/createCoffeeStore.js ***!
  \****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/**\r\n * Discover-coffee-stores - version 2.22 -  coffee-store-page\r\n * - Fetaures:\r\n * \r\n *    --> Clearing 'createRecords' message\r\n * \r\n *    --> Changing id to check id creation.\r\n * \r\n * Note: create record code block is being modifying to create the\r\n * coffee store record - harcoded id is set as 3 temproraly so \r\n * i can get the message \"create a record\"\r\n */ var Airtable = __webpack_require__(/*! airtable */ \"airtable\");\nvar base = new Airtable({\n    apiKey: process.env.AIRTABLE_API_KEY\n}).base(process.env.AIRTABLE_BASE_KEY);\nconst table = base(\"coffee-stores\");\nconsole.log({\n    table\n});\nconst createCoffeeStore = async (req, res)=>{\n    console.log({\n        table\n    });\n    if (req.method === \"POST\") {\n        //find a record\n        const { id , name , address , dma , vote , imgUrl  } = req.body;\n        const findingCoffeeStoreRecords = await table.select({\n            filterByFormula: `id=${id}`\n        }).firstPage();\n        console.log({\n            findingCoffeeStoreRecords\n        });\n        try {\n            if (findingCoffeeStoreRecords.length !== 0) {\n                const records = findingCoffeeStoreRecords.map((records)=>{\n                    return {\n                        ...records.fields\n                    };\n                });\n                res.json(records);\n            } else {\n                //create a record\n                const createRecords = await table.create([\n                    {\n                        fields: {\n                            id,\n                            name,\n                            address,\n                            dma,\n                            vote,\n                            imgUrl\n                        }\n                    }\n                ]);\n                const records1 = createRecords.map((records)=>{\n                    return {\n                        ...records.fields\n                    };\n                });\n                res.json({\n                    records: records1\n                });\n            }\n        } catch (err) {\n            console.log(\"Error finding store\", err);\n            res.status(500);\n            res.json({\n                message: \"Error finding store\",\n                err\n            });\n        }\n    }\n    ;\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (createCoffeeStore);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvY3JlYXRlQ29mZmVlU3RvcmUuanMuanMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBO0FBY0EsSUFBSUUsSUFBSSxHQUFHLElBQUlGLFFBQVEsQ0FBQztJQUFDRyxNQUFNLEVBQUVDO0NBQThCLENBQUMsQ0FBQ0Y7QUFFakUsTUFBTU0sS0FBSyxHQUFHTixJQUFJLENBQUMsZUFBZSxDQUFDO0FBRW5DTztJQUFjRCxLQUFLO0NBQUUsQ0FBQztBQUV0QixNQUFNRyxpQkFBaUIsR0FBRyxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsR0FBSztJQUMxQ0osT0FBTyxDQUFDQyxHQUFHLENBQUM7UUFBRUYsS0FBSztLQUFFLENBQUM7SUFFdEIsSUFBSUksR0FBRyxDQUFDRSxNQUFNLEtBQUs7UUFFZixlQUFlO1FBRWYsTUFBTSxFQUFFQyxFQUFFLEdBQUVDLElBQUksR0FBRUMsT0FBTyxHQUFFQztRQUUzQixNQUFNSTtZQUNGRTtTQUNIOztZQUVhRix5QkFBeUI7U0FBRSxDQUFDO1FBRTFDLElBQUk7O2dCQUVJLE1BQU1LLE9BQU8sR0FBR0w7b0JBQ1o7d0JBQ0ksR0FBR0ssT0FBTyxDQUFDRSxNQUFNO3FCQUNwQjtnQkFDTCxDQUFDLENBQUM7Z0JBQ0ZoQixHQUFHLENBQUNpQjtZQUNSLE9BQUs7Z0JBQ0wsaUJBQWlCOzs7d0JBR0xELE1BQU0sRUFBRTs0QkFDSmQsRUFBRTs0QkFDRkM7NEJBQ0FDLE9BQU87Ozs0QkFHUEcsTUFBTTs7cUJBRWI7aUJBQ0osQ0FBQztnQkFDRjtvQkFDSSxPQUFNO3dCQUNGLEdBQUdPO3FCQUNOO2dCQUNMLENBQUMsQ0FBQztnQkFDRmQsR0FBRyxDQUFDaUIsSUFBSSxDQUFDO29CQUFDSCxPQUFPLEVBQVBBO2lCQUFRLENBQUM7WUFDdkIsQ0FBQztRQUNMLEVBQUUsT0FBT00sR0FBRztZQUNSeEIsT0FBTztZQUNQSSxHQUFHLENBQUNxQixNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDaEJyQixHQUFHLENBQUNpQixJQUFJLENBQUM7Z0JBQUVLLE9BQU8sRUFBRTtnQkFBdUJGLEdBQUc7YUFBQyxDQUFDLENBQUM7UUFDckQsQ0FBQztJQUNMLENBQUM7O0FBQ0QsQ0FBQztBQUVMLGVBQWV0QiIsInNvdXJjZXMiOlsid2VicGFjazovL2NvZmZlZS1zdG9yZS1hcHAvLi9wYWdlcy9hcGkvY3JlYXRlQ29mZmVlU3RvcmUuanM/YjM0OSJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogRGlzY292ZXItY29mZmVlLXN0b3JlcyAtIHZlcnNpb24gMi4yMiAtICBjb2ZmZWUtc3RvcmUtcGFnZVxyXG4gKiAtIEZldGF1cmVzOlxyXG4gKiBcclxuICogICAgLS0+IENsZWFyaW5nICdjcmVhdGVSZWNvcmRzJyBtZXNzYWdlXHJcbiAqIFxyXG4gKiAgICAtLT4gQ2hhbmdpbmcgaWQgdG8gY2hlY2sgaWQgY3JlYXRpb24uXHJcbiAqIFxyXG4gKiBOb3RlOiBjcmVhdGUgcmVjb3JkIGNvZGUgYmxvY2sgaXMgYmVpbmcgbW9kaWZ5aW5nIHRvIGNyZWF0ZSB0aGVcclxuICogY29mZmVlIHN0b3JlIHJlY29yZCAtIGhhcmNvZGVkIGlkIGlzIHNldCBhcyAzIHRlbXByb3JhbHkgc28gXHJcbiAqIGkgY2FuIGdldCB0aGUgbWVzc2FnZSBcImNyZWF0ZSBhIHJlY29yZFwiXHJcbiAqL1xyXG5cclxudmFyIEFpcnRhYmxlID0gcmVxdWlyZSgnYWlydGFibGUnKTtcclxudmFyIGJhc2UgPSBuZXcgQWlydGFibGUoe2FwaUtleTogcHJvY2Vzcy5lbnYuQUlSVEFCTEVfQVBJX0tFWSB9KS5iYXNlKHByb2Nlc3MuZW52LkFJUlRBQkxFX0JBU0VfS0VZICk7XHJcblxyXG5jb25zdCB0YWJsZSA9IGJhc2UoJ2NvZmZlZS1zdG9yZXMnKTtcclxuXHJcbmNvbnNvbGUubG9nKHsgdGFibGUgfSlcclxuXHJcbmNvbnN0IGNyZWF0ZUNvZmZlZVN0b3JlID0gYXN5bmMgKHJlcSwgcmVzKSA9PiB7XHJcbiAgICBjb25zb2xlLmxvZyh7IHRhYmxlIH0pXHJcblxyXG4gICAgaWYgKHJlcS5tZXRob2QgPT09IFwiUE9TVFwiKSB7XHJcblxyXG4gICAgICAgIC8vZmluZCBhIHJlY29yZFxyXG4gICAgXHJcbiAgICAgICAgY29uc3QgeyBpZCwgbmFtZSwgYWRkcmVzcywgZG1hLCB2b3RlLCBpbWdVcmwgfSA9IHJlcS5ib2R5O1xyXG4gICAgXHJcbiAgICAgICAgY29uc3QgZmluZGluZ0NvZmZlZVN0b3JlUmVjb3JkcyA9IGF3YWl0IHRhYmxlLnNlbGVjdCh7XHJcbiAgICAgICAgICAgIGZpbHRlckJ5Rm9ybXVsYTogYGlkPSR7aWR9YFxyXG4gICAgICAgIH0pLmZpcnN0UGFnZSgpO1xyXG4gICAgXHJcbiAgICAgICAgY29uc29sZS5sb2coeyBmaW5kaW5nQ29mZmVlU3RvcmVSZWNvcmRzIH0pXHJcbiAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBpZiAoZmluZGluZ0NvZmZlZVN0b3JlUmVjb3Jkcy5sZW5ndGggIT09IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlY29yZHMgPSBmaW5kaW5nQ29mZmVlU3RvcmVSZWNvcmRzLm1hcCgocmVjb3JkcykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybntcclxuICAgICAgICAgICAgICAgICAgICAgICAgLi4ucmVjb3Jkcy5maWVsZHNcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgcmVzLmpzb24ocmVjb3JkcylcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIC8vY3JlYXRlIGEgcmVjb3JkXHJcbiAgICAgICAgICAgICAgICBjb25zdCBjcmVhdGVSZWNvcmRzID0gYXdhaXQgdGFibGUuY3JlYXRlKFtcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWRkcmVzcyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRtYSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZvdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbWdVcmxcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIF0pIFxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVjb3JkcyA9IGNyZWF0ZVJlY29yZHMubWFwKChyZWNvcmRzKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJue1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5yZWNvcmRzLmZpZWxkc1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICByZXMuanNvbih7cmVjb3Jkc30pXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnIpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnRXJyb3IgZmluZGluZyBzdG9yZScsIGVyciApO1xyXG4gICAgICAgICAgICByZXMuc3RhdHVzKDUwMCk7XHJcbiAgICAgICAgICAgIHJlcy5qc29uKHsgbWVzc2FnZTogJ0Vycm9yIGZpbmRpbmcgc3RvcmUnLCBlcnJ9KTtcclxuICAgICAgICB9IFxyXG4gICAgfTtcclxuICAgIH1cclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNyZWF0ZUNvZmZlZVN0b3JlOyJdLCJuYW1lcyI6WyJBaXJ0YWJsZSIsInJlcXVpcmUiLCJiYXNlIiwiYXBpS2V5IiwicHJvY2VzcyIsImVudiIsIkFJUlRBQkxFX0FQSV9LRVkiLCJBSVJUQUJMRV9CQVNFX0tFWSIsInRhYmxlIiwiY29uc29sZSIsImxvZyIsImNyZWF0ZUNvZmZlZVN0b3JlIiwicmVxIiwicmVzIiwibWV0aG9kIiwiaWQiLCJuYW1lIiwiYWRkcmVzcyIsImRtYSIsInZvdGUiLCJpbWdVcmwiLCJib2R5IiwiZmluZGluZ0NvZmZlZVN0b3JlUmVjb3JkcyIsInNlbGVjdCIsImZpbHRlckJ5Rm9ybXVsYSIsImZpcnN0UGFnZSIsImxlbmd0aCIsInJlY29yZHMiLCJtYXAiLCJmaWVsZHMiLCJqc29uIiwiY3JlYXRlUmVjb3JkcyIsImNyZWF0ZSIsImVyciIsInN0YXR1cyIsIm1lc3NhZ2UiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/createCoffeeStore.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/createCoffeeStore.js"));
module.exports = __webpack_exports__;

})();